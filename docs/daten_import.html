<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Andreas Fischeneder">
<title>4&nbsp; Daten importieren – Einführung in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./daten_export.html" rel="next">
<link href="./daten_transform.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0c57a5a96bb3d43983d34e8ac53ef0b2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script><script src="site_libs/kePrint-0.0.1/kePrint.js"></script><link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./daten_transform.html">Datenaufbereitung</a></li><li class="breadcrumb-item"><a href="./daten_import.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten importieren</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Einführung in R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Willkommen</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Grundlagen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./erste_schritte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Erste Schritte in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./best_practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Best Practices</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Datenaufbereitung</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./daten_transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Daten aufbereiten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./daten_import.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten importieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./daten_export.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Daten exportieren</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Datenvisualisierung</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualisierung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Grafiken in R</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Statistik in R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deskript_statistik.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Deskriptive Statistiken</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regressionen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regressionen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kausalinferenz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Kausalinferenz</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Export von Ergebnissen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tab_export.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Tabellen exportieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fig_export.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Grafiken exportieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Berichte in R</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Weitere Themen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./loops_funktionen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Loops und eigene Funktionen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ki.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">KI-Unterstützung in R</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./referenzen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur &amp; Ressourcen</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
<li><a href="#datenformate" id="toc-datenformate" class="nav-link active" data-scroll-target="#datenformate"><span class="header-section-number">4.1</span> Datenformate</a></li>
  <li>
<a href="#daten-einlesen" id="toc-daten-einlesen" class="nav-link" data-scroll-target="#daten-einlesen"><span class="header-section-number">4.2</span> Daten einlesen</a>
  <ul class="collapse">
<li><a href="#csv-dateien" id="toc-csv-dateien" class="nav-link" data-scroll-target="#csv-dateien"><span class="header-section-number">4.2.1</span> CSV-Dateien</a></li>
  <li><a href="#rds-dateien" id="toc-rds-dateien" class="nav-link" data-scroll-target="#rds-dateien"><span class="header-section-number">4.2.2</span> RDS-Dateien</a></li>
  <li><a href="#excel-spreadsheets" id="toc-excel-spreadsheets" class="nav-link" data-scroll-target="#excel-spreadsheets"><span class="header-section-number">4.2.3</span> Excel-Spreadsheets</a></li>
  <li><a href="#stata-datens%C3%A4tze" id="toc-stata-datensätze" class="nav-link" data-scroll-target="#stata-datens%C3%A4tze"><span class="header-section-number">4.2.4</span> Stata-Datensätze</a></li>
  <li><a href="#weitere-dateiformate" id="toc-weitere-dateiformate" class="nav-link" data-scroll-target="#weitere-dateiformate"><span class="header-section-number">4.2.5</span> Weitere Dateiformate</a></li>
  </ul>
</li>
  <li><a href="#daten-ansehen" id="toc-daten-ansehen" class="nav-link" data-scroll-target="#daten-ansehen"><span class="header-section-number">4.3</span> Daten ansehen</a></li>
  <li>
<a href="#daten-bereinigen" id="toc-daten-bereinigen" class="nav-link" data-scroll-target="#daten-bereinigen"><span class="header-section-number">4.4</span> Daten bereinigen</a>
  <ul class="collapse">
<li><a href="#fehlende-werte" id="toc-fehlende-werte" class="nav-link" data-scroll-target="#fehlende-werte"><span class="header-section-number">4.4.1</span> Fehlende Werte</a></li>
  <li><a href="#variablennamen" id="toc-variablennamen" class="nav-link" data-scroll-target="#variablennamen"><span class="header-section-number">4.4.2</span> Variablennamen</a></li>
  <li><a href="#datentypen" id="toc-datentypen" class="nav-link" data-scroll-target="#datentypen"><span class="header-section-number">4.4.3</span> Datentypen</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./daten_transform.html">Datenaufbereitung</a></li><li class="breadcrumb-item"><a href="./daten_import.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten importieren</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-daten-import" class="quarto-section-identifier"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten importieren</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>Bisher haben wir Objekte in R selbst erstellt oder in R Packages enthaltene Datensätze verwendet. In diesem Abschnitt lernen wir, wie man Datensätze in R importiert. Dazu erstellen wir zuerst in dem Ordner unseres R-Projects einen Datenordner und folgende Unterordner:</p>
<pre><code>r_intro/
├── data/
│   ├── raw/           # Originaldaten
│   └── processed/     # Bearbeitete Daten</code></pre>
<p>Anschließend laden wir ein Set an unterschiedlichen Datensatz-Arten aus dem Github-Ordner des Kurses in den <code>raw</code> Ordner, in dem wir entweder alle Dateien in diesem <a href="https://github.com/rintro-fuhagen-econpolicy/rintro-fuhagen-econpolicy.github.io/tree/main/data/raw/earnings_data">Github-Ordner</a> manuell herunterladen, oder den folgenden Code in R ausführen:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">repo_url</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/rintro-fuhagen-econpolicy/rintro-fuhagen-econpolicy.github.io/archive/refs/heads/main.zip"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span><span class="va">repo_url</span>, destfile <span class="op">=</span> <span class="st">"repo.zip"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span><span class="op">(</span><span class="st">"repo.zip"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.copy</a></span><span class="op">(</span><span class="st">"rintro-fuhagen-econpolicy.github.io-main/data/raw/earnings_data"</span>, </span>
<span>          <span class="st">"data/raw"</span>, </span>
<span>          recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="st">"repo.zip"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="st">"rintro-fuhagen-econpolicy.github.io-main"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">repo_url</span><span class="op">)</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="datenformate" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="datenformate">
<span class="header-section-number">4.1</span> Datenformate</h2>
<p>In der Praxis begegnen dir verschiedene Datenformate, die mit unterschiedlichen Funktionen in R eingelesen werden. <a href="#tbl-data-formats" class="quarto-xref">Tabelle&nbsp;<span>4.1</span></a> gibt einen Überblick über die gebräuchlichsten Formate.</p>
<div class="cell">
<div id="tbl-data-formats" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-formats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;4.1: Datensatzformate in der Praxis (Auswahl)
</figcaption><div aria-describedby="tbl-data-formats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped do-not-create-environment cell caption-top table-sm small">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Dateiformat</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Typisch für</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Package</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Lesefunktion</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">csv</td>
<td style="text-align: left;">Allgemein</td>
<td style="text-align: left;">readr (tidyverse)</td>
<td style="text-align: left;">read_csv()</td>
</tr>
<tr class="even">
<td style="text-align: left;">rds</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">readr (tidyverse)</td>
<td style="text-align: left;">read_rds()</td>
</tr>
<tr class="odd">
<td style="text-align: left;">txt</td>
<td style="text-align: left;">Allgemein</td>
<td style="text-align: left;">readr (tidyverse)</td>
<td style="text-align: left;">read_delim()</td>
</tr>
<tr class="even">
<td style="text-align: left;">xlsx</td>
<td style="text-align: left;">MS Office</td>
<td style="text-align: left;">readxl</td>
<td style="text-align: left;">read_excel()</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dta</td>
<td style="text-align: left;">Stata</td>
<td style="text-align: left;">haven</td>
<td style="text-align: left;">read_dta()</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section><section id="daten-einlesen" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="daten-einlesen">
<span class="header-section-number">4.2</span> Daten einlesen</h2>
<section id="csv-dateien" class="level3" data-number="4.2.1"><h3 data-number="4.2.1" class="anchored" data-anchor-id="csv-dateien">
<span class="header-section-number">4.2.1</span> CSV-Dateien</h3>
<p>Das CSV-Format (Comma-Separated Values) speichert tabellarische Daten als Text, wobei jede Zeile eine Beobachtung und jede Spalte einen Wert enthält, getrennt durch Kommata oder andere Trennzeichen. Beim Import in R müssen wir auf das korrekte Trennzeichen achten, damit die Zahlen korrekt eingelesen werden.</p>
<p>CSV-Dateien können mit der Funktion <code>read_csv()</code> aus dem <code>tidyverse</code>/<code>readr</code> Package eingelesen werden:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">earnings</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.csv"</span><span class="op">)</span></span>
<span><span class="va">earnings</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;   Names        age.in.years Nationalität  `inc in Eur`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;       </span></span>
<span><span class="co">#&gt; 1 Anna Maria             33 DE            1689        </span></span>
<span><span class="co">#&gt; 2 Ben                    NA N/A           875         </span></span>
<span><span class="co">#&gt; 3 Clara                  21 International 2000€       </span></span>
<span><span class="co">#&gt; 4 Dimitri                28 EU            2299        </span></span>
<span><span class="co">#&gt; 5 Emilia-Luise           29 DE            2522        </span></span>
<span><span class="co">#&gt; 6 Fatima                 23 DE            1060        </span></span>
<span><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>International werden die einzelnen Spalten mit einem Komma (,) getrennt. Dies ist auch das Default-Trennzeichen bei <code>read_csv()</code>. Da in der deutschen Sprache dieses als Zeichen für Dezimalstellen verwendet wird, wird hier das Semikolon/der Strichpunkt (;) als Trennzeichen verwendet. Verwenden wir das falsche Trennzeichen beim Einlesen von CSV-Dateien mit diesem Trennzeichen, werden die Daten falsch eingelesen:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings_de.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 1</span></span>
<span><span class="co">#&gt;   `Names;age.in.years;Nationalität;inc in Eur`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                                       </span></span>
<span><span class="co">#&gt; 1 Anna Maria;33;DE;1689                       </span></span>
<span><span class="co">#&gt; 2 Ben;NA;N/A;875                              </span></span>
<span><span class="co">#&gt; 3 Clara;21;International;2000€                </span></span>
<span><span class="co">#&gt; 4 Dimitri;28;EU;2299                          </span></span>
<span><span class="co">#&gt; 5 Emilia-Luise;29;DE;2522                     </span></span>
<span><span class="co">#&gt; 6 Fatima;23;DE;1060                           </span></span>
<span><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Stattdessen müssen wir bei einer solchen Encodierung <code>read_csv2()</code> verwenden:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_csv2</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings_de.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;   Names        age.in.years Nationalität  `inc in Eur`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;       </span></span>
<span><span class="co">#&gt; 1 Anna Maria             33 DE            1689        </span></span>
<span><span class="co">#&gt; 2 Ben                    NA N/A           875         </span></span>
<span><span class="co">#&gt; 3 Clara                  21 International 2000€       </span></span>
<span><span class="co">#&gt; 4 Dimitri                28 EU            2299        </span></span>
<span><span class="co">#&gt; 5 Emilia-Luise           29 DE            2522        </span></span>
<span><span class="co">#&gt; 6 Fatima                 23 DE            1060        </span></span>
<span><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-simple callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warnung</span>Häufige Probleme mit CSV-Dateien
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>
<em>Trennzeichen</em>: <code>read_csv("datei.csv")</code> bei <code>,</code> als Trennzeichen, <code>read_csv2("datei.csv")</code> bei <code>;</code>
</li>
<li>
<em>Encoding</em>: Bei Problemen mit Sonderzeichen muss das Encoding spezifiziert werden, etwa <code>read_csv("datei.csv", locale = locale(encoding = "latin1"))</code>
</li>
<li>
<em>Dezimaltrennzeichen</em>: Ebenfalls über das <code>locale</code> Argument,<code>locale = locale(decimal_mark = ",")</code>
</li>
<li>
<em>Falsche Spaltentypen</em>: Mit <code>col_types</code> spezifizieren</li>
</ul>
</div>
</div>
</section><section id="rds-dateien" class="level3" data-number="4.2.2"><h3 data-number="4.2.2" class="anchored" data-anchor-id="rds-dateien">
<span class="header-section-number">4.2.2</span> RDS-Dateien</h3>
<p>RDS ist ein R-spezifisches Format, das ein einzelnes R-Objekt speichert. RDS speichert Objekte in nativer R-Struktur, inklusive Datentypen, Faktoren, Datum/Zeit und sogar komplexer Objekte wie Modelle, wodurch beim Einlesen keine Umwandlungen nötig sind. RDS-Dateien sind oft kleiner und schneller zu lesen als Textdateien, da keine Konvertierung von und zu Text nötig ist.</p>
<p>Wir können RDS-Dateien mit <code>read_rds()</code> einlesen:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">earnings</span> <span class="op">&lt;-</span> <span class="fu">read_rds</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.rds"</span><span class="op">)</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Hinweis</span>RData-Format
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ein weiteres R-spezifisches Format ist RData. RData kann mehrere Objekte speichern:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">numbers</span> <span class="op">&lt;-</span> <span class="fl">6</span><span class="op">:</span><span class="fl">10</span></span>
<span><span class="va">names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Anna"</span>, <span class="st">"Ben"</span>, <span class="st">"Clara"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">numbers</span>, <span class="va">names</span>, file <span class="op">=</span> <span class="st">"data/raw/earnings_data/multidata.RData"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">numbers</span>, <span class="va">names</span><span class="op">)</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Mit <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> werden alle in dieser Datei abgespeicherten R-Objekte importiert:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"data/raw/earnings_data/multidata.RData"</span><span class="op">)</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</section><section id="excel-spreadsheets" class="level3" data-number="4.2.3"><h3 data-number="4.2.3" class="anchored" data-anchor-id="excel-spreadsheets">
<span class="header-section-number">4.2.3</span> Excel-Spreadsheets</h3>
<p>Um Excel-Spreadsheets einzulesen benötigt man in R ein zusätzliches Package (<code>readxl</code>). Mit der Funktion <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> können sowohl <code>.xlsx</code> als auch <code>.xls</code> Dateien eingeladen werden.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.xlsx"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;   Names        age.in.years Nationalität  `inc in Eur`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;       </span></span>
<span><span class="co">#&gt; 1 Anna Maria             33 DE            1689        </span></span>
<span><span class="co">#&gt; 2 Ben                    NA N/A           875         </span></span>
<span><span class="co">#&gt; 3 Clara                  21 International 2000€       </span></span>
<span><span class="co">#&gt; 4 Dimitri                28 EU            2299        </span></span>
<span><span class="co">#&gt; 5 Emilia-Luise           29 DE            2522        </span></span>
<span><span class="co">#&gt; 6 Fatima                 23 DE            1060        </span></span>
<span><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Per Default importiert diese Funktion immer den Datensatz aus dem ersten Tabellenblatt. Mit dem Argument <code>sheet = ...</code> können wir das Tabellenblatt wählen. Möglich ist sowohl, die Nummer des Tabellenblatts als Zahl anzugeben, als auch den Namen des Tabellenblatts in Anführungszeichen anzugeben. Mit dem Argument <code>range = ...</code> können wir außerdem den Bereich des Tabellenblatts angeben, den wir einlesen wollen:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.xlsx"</span>, sheet <span class="op">=</span> <span class="fl">1</span>, range <span class="op">=</span> <span class="st">"A1:C3"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;   Names      age.in.years Nationalität</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;       </span></span>
<span><span class="co">#&gt; 1 Anna Maria           33 DE          </span></span>
<span><span class="co">#&gt; 2 Ben                  NA N/A</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Um einen Überblick über die Tabellenblätter eines Spreadsheets zu bekommen, ist die Funktion <code><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets()</a></code> im <code>readxl</code> Package hilfreich:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets</a></span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.xlsx"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Sheet1"</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="stata-datensätze" class="level3" data-number="4.2.4"><h3 data-number="4.2.4" class="anchored" data-anchor-id="stata-datensätze">
<span class="header-section-number">4.2.4</span> Stata-Datensätze</h3>
<p>Stata ist eine alternative Statistiksoftware, die in den Wirtschaftswissenschaften immer noch häufig verwendet wird. Für das Speichern von Datensätzen verwendet Stata das <code>.dta</code>-Format. Dieses speichert sowohl die Daten als auch Variablen- und Wertelabels, sodass beim Einlesen in R oder Stata die Struktur, Kategorien und Labels erhalten bleiben.</p>
<p>Für das Einlesen von Stata-Datensätzen verwenden wir das <code>haven</code> Package und die Funktion ``:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org">haven</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html">read_dta</a></span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.dta"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;   names          age nationality        income</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl+lbl&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Anna Maria      33  1 [DE]              1689</span></span>
<span><span class="co">#&gt; 2 Ben             NA NA                    875</span></span>
<span><span class="co">#&gt; 3 Clara           21  3 [International]   2000</span></span>
<span><span class="co">#&gt; 4 Dimitri         28  2 [EU]              2299</span></span>
<span><span class="co">#&gt; 5 Emilia-Luise    29  1 [DE]              2522</span></span>
<span><span class="co">#&gt; 6 Fatima          23  1 [DE]              1060</span></span>
<span><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>In Stata werden Faktorvariablen wie in diesem Fall <code>nationality</code> numerisch abgespeichert und mit Labels versehen. Um diese in R miteinzulesen, können wir <code><a href="https://forcats.tidyverse.org/reference/as_factor.html">haven::as_factor()</a></code> verwenden:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html">read_dta</a></span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.dta"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>nationality <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span><span class="op">(</span><span class="va">nationality</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;   names          age nationality   income</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt; &lt;fct&gt;          &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Anna Maria      33 DE              1689</span></span>
<span><span class="co">#&gt; 2 Ben             NA &lt;NA&gt;             875</span></span>
<span><span class="co">#&gt; 3 Clara           21 International   2000</span></span>
<span><span class="co">#&gt; 4 Dimitri         28 EU              2299</span></span>
<span><span class="co">#&gt; 5 Emilia-Luise    29 DE              2522</span></span>
<span><span class="co">#&gt; 6 Fatima          23 DE              1060</span></span>
<span><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tipp</span>Automatisiertes Faktor-Einlesen bei dta
</div>
</div>
<div class="callout-body-container callout-body">
<p>Damit wir nicht bei jeder Variable im Datensatz überprüfen müssen, ob es sich um eine Label-Variable handelt, können wir auch folgenden Code verwenden, der über alle Variable (<code>across(.)</code>) die Funktion <code><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor()</a></code> anwendet, falls es sich dabei um eine Label-Variable handelt (<code>where(is.labelled)</code>):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html">read_dta</a></span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.dta"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.labelled</span><span class="op">)</span>, <span class="va">as_factor</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</section><section id="weitere-dateiformate" class="level3" data-number="4.2.5"><h3 data-number="4.2.5" class="anchored" data-anchor-id="weitere-dateiformate">
<span class="header-section-number">4.2.5</span> Weitere Dateiformate</h3>
<p>Die Funktion <code>read_delim()</code> kann in R verwendet werden, um Datensätze mit beliebigem Trennzeichen einzulesen. Sie versucht dabei, das Trennzeichen automatisch zu erkennen. Wir können damit etwa eine Textdatei (.txt) einlesen:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_delim</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings_tab.txt"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;   Names        age.in.years Nationalität  `inc in Eur`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;       </span></span>
<span><span class="co">#&gt; 1 Anna Maria             33 DE            1689        </span></span>
<span><span class="co">#&gt; 2 Ben                    NA N/A           875         </span></span>
<span><span class="co">#&gt; 3 Clara                  21 International 2000€       </span></span>
<span><span class="co">#&gt; 4 Dimitri                28 EU            2299        </span></span>
<span><span class="co">#&gt; 5 Emilia-Luise           29 DE            2522        </span></span>
<span><span class="co">#&gt; 6 Fatima                 23 DE            1060        </span></span>
<span><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Bei diesem Text-File wird der Tabulator als Trennzeichen verwendet und von R auch korrekt beim Einlesen erkannt. Wir können das Trennzeichen aber auch explizit über das <code>delim = value</code>-Argument spezifizieren:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_delim</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings_tab.txt"</span>, delim <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-simple callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warnung</span>Probleme mit Trennzeichen
</div>
</div>
<div class="callout-body-container callout-body">
<p>Bei TXT-Dateien oder anderen allgemeinen Datensätzen kann es jedoch immer wieder zu Problemen kommen, wenn das Trennzeichen auch innerhalb einer Variable verwendet wird. Wurde zum Beispiel ein Datensatz als TXT-Datei mit Leerzeichen als Trennzeichen abgespeichert, so führt dies beim Einlesen zu folgendem Problem:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_delim</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings_space.txt"</span>, delim <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 6</span></span>
<span><span class="co">#&gt;   Names        age.in.years Nationalität  inc       `in`     Eur  </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;    &lt;lgl&gt;</span></span>
<span><span class="co">#&gt; 1 Anna         Maria        33            "DE"      "1689\r" NA   </span></span>
<span><span class="co">#&gt; 2 Ben          &lt;NA&gt;         N/A           "875\r"    &lt;NA&gt;    NA   </span></span>
<span><span class="co">#&gt; 3 Clara        21           International "2000€\r"  &lt;NA&gt;    NA   </span></span>
<span><span class="co">#&gt; 4 Dimitri      28           EU            "2299\r"   &lt;NA&gt;    NA   </span></span>
<span><span class="co">#&gt; 5 Emilia-Luise 29           DE            "2522\r"   &lt;NA&gt;    NA   </span></span>
<span><span class="co">#&gt; 6 Fatima       23           DE            "1060\r"   &lt;NA&gt;    NA   </span></span>
<span><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Da die erste Beobachtung der Namensvariable (<em>Anna Maria</em>) und die Variablenbezeichnung <code>inc in Eur</code> Leerzeichen enthalten, werden hier die Werte in die nächsten Spalten verschoben. Daher ist es ratsam beim Exportieren von eigenen Datensätzen auf Formate zurückzugreifen, die von R problemlos richtig gelesen werden (etwa RDS oder CSV).</p>
</div>
</div>
</section></section><section id="daten-ansehen" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="daten-ansehen">
<span class="header-section-number">4.3</span> Daten ansehen</h2>
<p>Nach dem Import von Daten sollte man sich den Datensatz immer zunächst genau ansehen, um Struktur, Datentypen und mögliche Probleme frühzeitig zu erkennen. Bisher haben wir uns den Datensatz durch Eingabe des Objektnamens anzeigen lassen. Sollte ein Datensatz als <em>Dataframe</em> und nicht als <em>Tibble</em> geladen sein, hat dies den Nachteil, dass hier der gesamte Datensatz in der Konsole ausgegeben wird. Bei kleinen Datensätzen macht das kaum einen Unterschied, aber bei größeren Daten kann die vollständige Ausgabe sehr unübersichtlich werden und die Konsole „überfluten“.</p>
<p>Es ist daher besser, sich in der Konsole nur Teile eines Datensatzes anzeigen zu lassen. In Base R bieten sich dafür Funktionen wie head() und tail() (Anzeigen der ersten bzw. letzten Zeilen):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">earnings</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span><span class="co">#&gt;   Names        age.in.years Nationalität  `inc in Eur`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;       </span></span>
<span><span class="co">#&gt; 1 Anna Maria             33 DE            1689        </span></span>
<span><span class="co">#&gt; 2 Ben                    NA N/A           875         </span></span>
<span><span class="co">#&gt; 3 Clara                  21 International 2000€       </span></span>
<span><span class="co">#&gt; 4 Dimitri                28 EU            2299        </span></span>
<span><span class="co">#&gt; 5 Emilia-Luise           29 DE            2522</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Im <code>tidyverse</code> Package bietet die Funktion <code>glimpse()</code> eine kompakte Übersicht:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">glimpse</span><span class="op">(</span><span class="va">earnings</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 10</span></span>
<span><span class="co">#&gt; Columns: 4</span></span>
<span><span class="co">#&gt; $ Names        &lt;chr&gt; "Anna Maria", "Ben", "Clara", "Dimitri", "Emilia-Luise…</span></span>
<span><span class="co">#&gt; $ age.in.years &lt;int&gt; 33, NA, 21, 28, 29, 23, 32, 23, 27, 21</span></span>
<span><span class="co">#&gt; $ Nationalität &lt;chr&gt; "DE", "N/A", "International", "EU", "DE", "DE", "DE", …</span></span>
<span><span class="co">#&gt; $ `inc in Eur` &lt;chr&gt; "1689", "875", "2000€", "2299", "2522", "1060", "1781"…</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Neben den ersten Werten in jeder Variable sehen wir auch, dass unser Datensatz aus 10 Zeilen und 4 Spalten besteht, sowie den Datentyp der jeweiligen Variablen (z.b. <code>character</code> bei <code>earnings$Names</code>).</p>
<p>Um uns den ganzen Datensatz anzusehen, können wir uns den Datensatz in einem separaten Fenster öffnen. Dies geschieht entweder durch Doppelklick auf den Datensatz im Environment-Fenster oder durch die Funktionen <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> (Base R) bzw. <code>view()</code> (<code>tidyverse</code>):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">view</span><span class="op">(</span><span class="va">earnings</span><span class="op">)</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Dadurch öffnet sich im R-Script-Panel ein neues Fenster mit dem Datensatz (<a href="#fig-view-data" class="quarto-xref">Abbildung&nbsp;<span>4.1</span></a>). Um uns den Datensatz genauer anzusehen, haben wir auch die Möglichkeit, Daten zu filtern (grüne Markierung), zu suchen (rote Markierung) oder den Datensatz anhand einer bestimmten Variable zu sortieren (blaue Markierung).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-view-data" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Datensatz-Fenster in R mit Herhorhebungen der Filter-, Sortier- und Suchfunktion.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-view-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/view_data.png" class="img-fluid figure-img" alt="Datensatz-Fenster in R mit Herhorhebungen der Filter-, Sortier- und Suchfunktion.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-view-data-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.1: Separates Datensatz-Fenster in R.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="daten-bereinigen" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="daten-bereinigen">
<span class="header-section-number">4.4</span> Daten bereinigen</h2>
<p>Nachdem wir einen Datensatz importiert haben müssen wir diesen häufig bereinigen, bevor wir mit der Analyse oder Weiterverarbeitung starten. Wesentliche Punkte sind dabei die Vereinheitlichung der Variablennamen, eine Korrektur falscher Datentypen und die Identifizierung fehlender Werte.</p>
<p>Durch einen ersten Blick auf die Daten bekommen wir schnell einen Überblick, welche Probleme im Datensatz bestehen:</p>
<div class="cell">
<pre><code>#&gt; # A tibble: 10 × 4
#&gt;    Names        age.in.years Nationalität  `inc in Eur`
#&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;       
#&gt;  1 Anna Maria             33 DE            1689        
#&gt;  2 Ben                    NA N/A           875         
#&gt;  3 Clara                  21 International 2000€       
#&gt;  4 Dimitri                28 EU            2299        
#&gt;  5 Emilia-Luise           29 DE            2522        
#&gt;  6 Fatima                 23 DE            1060        
#&gt;  7 Gerda                  32 DE            1781        
#&gt;  8 Hannah                 23 EU            2463        
#&gt;  9 Ismail                 27 International 1442        
#&gt; 10 Johanna                21 DE            1404</code></pre>
</div>
<p>Der <code>earnings</code>-Datensatz zeigt dabei mehrere typische Probleme: - <em>Fehlende Werte</em>: In der Variable <code>Nationalität</code> wurde ein fehlender Wert nicht als <code>NA</code> erkannt, sondern als Text eingelesen (<em>N/A</em>). - <em>Variablennamen</em>: Die Namen sind uneinheitlich und enthalten Großbuchstaben, Sonderzeichen, Leerzeichen oder Punkte – sie widersprechen damit den Best Practices zur Namensgebung. - <em>Datentypen</em>: Die Variable <em>incEur</em> wurde als <code>character</code> eingelesen, sollte aber eigentlich numerisch sein.</p>
<p>Diese Probleme können wir mit den in <a href="daten_transform.html" class="quarto-xref"><span>Kapitel 3</span></a> vorgestellten Operationen lösen. Es ist jedoch sinnvoll, den Einleseprozess so anzupassen, dass die Daten direkt korrekt eingelesen werden.</p>
<section id="fehlende-werte" class="level3" data-number="4.4.1"><h3 data-number="4.4.1" class="anchored" data-anchor-id="fehlende-werte">
<span class="header-section-number">4.4.1</span> Fehlende Werte</h3>
<p>R interpretiert beim CSV-Import standardmäßig nur leere Felder oder den String <em>NA</em> als fehlende Werte (<code>NA</code>). In unserem Datensatz fehlt jedoch auch die zweite Beobachtung in <code>Nationalität</code>, die als <em>N/A</em> codiert wurde. Mit <code>read_csv()</code> können wir über das Argument <code>na = ...</code> festlegen, welche Werte als <code>NA</code> eingelesen werden sollen:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">earnings</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.csv"</span>, na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"NA"</span>, <span class="st">"N/A"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">earnings</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;    Names        age.in.years Nationalität  `inc in Eur`</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;       </span></span>
<span><span class="co">#&gt;  1 Anna Maria             33 DE            1689        </span></span>
<span><span class="co">#&gt;  2 Ben                    NA &lt;NA&gt;          875         </span></span>
<span><span class="co">#&gt;  3 Clara                  21 International 2000€       </span></span>
<span><span class="co">#&gt;  4 Dimitri                28 EU            2299        </span></span>
<span><span class="co">#&gt;  5 Emilia-Luise           29 DE            2522        </span></span>
<span><span class="co">#&gt;  6 Fatima                 23 DE            1060        </span></span>
<span><span class="co">#&gt;  7 Gerda                  32 DE            1781        </span></span>
<span><span class="co">#&gt;  8 Hannah                 23 EU            2463        </span></span>
<span><span class="co">#&gt;  9 Ismail                 27 International 1442        </span></span>
<span><span class="co">#&gt; 10 Johanna                21 DE            1404</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="variablennamen" class="level3" data-number="4.4.2"><h3 data-number="4.4.2" class="anchored" data-anchor-id="variablennamen">
<span class="header-section-number">4.4.2</span> Variablennamen</h3>
<p>Variablen sollten – wie alle R-Objekte – aussagekräftig und einheitlich benannt werden. In diesem Kurs orientieren wir uns dabei an der snake_case-Konvention. Die ursprünglichen Variablennamen widersprechen dieser Logik, da sie Großbuchstaben, Sonderzeichen, Leerzeichen oder Punkte als Trennzeichen enthalten. Außerdem transportieren manche Namen zu viele Informationen: Dass das Alter in Jahren oder das Einkommen in Euro gemessen wird, ist in der Regel aus dem Kontext des Datensatzes klar und somit redundant.</p>
<p>Um Variablennamen gezielt zu ändern, können wir <code>rename(new_name = old_name)</code> verwenden. Enthält ein Variablenname Leerzeichen, muss er in Backticks (<code>`</code>) gesetzt werden:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">earnings</span> <span class="op">&lt;-</span> <span class="va">earnings</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">Names</span>,</span>
<span>    age <span class="op">=</span> <span class="va">age.in.years</span>,</span>
<span>    nationality <span class="op">=</span> <span class="va">Nationalität</span>,</span>
<span>    income <span class="op">=</span> <span class="va">`inc in Eur`</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">earnings</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;    name           age nationality   income</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt; </span></span>
<span><span class="co">#&gt;  1 Anna Maria      33 DE            1689  </span></span>
<span><span class="co">#&gt;  2 Ben             NA &lt;NA&gt;          875   </span></span>
<span><span class="co">#&gt;  3 Clara           21 International 2000€ </span></span>
<span><span class="co">#&gt;  4 Dimitri         28 EU            2299  </span></span>
<span><span class="co">#&gt;  5 Emilia-Luise    29 DE            2522  </span></span>
<span><span class="co">#&gt;  6 Fatima          23 DE            1060  </span></span>
<span><span class="co">#&gt;  7 Gerda           32 DE            1781  </span></span>
<span><span class="co">#&gt;  8 Hannah          23 EU            2463  </span></span>
<span><span class="co">#&gt;  9 Ismail          27 International 1442  </span></span>
<span><span class="co">#&gt; 10 Johanna         21 DE            1404</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Bei Datensätzen mit vielen Variablen ist eine einzelne Umbenennung mühsam. Hier kann die Funktion <code><a href="https://sfirke.github.io/janitor/reference/clean_names.html">janitor::clean_names()</a></code> (aus dem gleichnamigen Paket) helfen, alle Variablennamen automatisch in snake_case zu übersetzen. Einzelne Anpassungen lassen sich anschließend bei Bedarf noch vornehmen:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/raw/earnings_data/earnings.csv"</span>, na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"NA"</span>, <span class="st">"N/A"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span>case <span class="op">=</span> <span class="st">"snake"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;    names        age_in_years nationalitat  inc_in_eur</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;     </span></span>
<span><span class="co">#&gt;  1 Anna Maria             33 DE            1689      </span></span>
<span><span class="co">#&gt;  2 Ben                    NA &lt;NA&gt;          875       </span></span>
<span><span class="co">#&gt;  3 Clara                  21 International 2000€     </span></span>
<span><span class="co">#&gt;  4 Dimitri                28 EU            2299      </span></span>
<span><span class="co">#&gt;  5 Emilia-Luise           29 DE            2522      </span></span>
<span><span class="co">#&gt;  6 Fatima                 23 DE            1060      </span></span>
<span><span class="co">#&gt;  7 Gerda                  32 DE            1781      </span></span>
<span><span class="co">#&gt;  8 Hannah                 23 EU            2463      </span></span>
<span><span class="co">#&gt;  9 Ismail                 27 International 1442      </span></span>
<span><span class="co">#&gt; 10 Johanna                21 DE            1404</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section><section id="datentypen" class="level3" data-number="4.4.3"><h3 data-number="4.4.3" class="anchored" data-anchor-id="datentypen">
<span class="header-section-number">4.4.3</span> Datentypen</h3>
<p>Wenn Variablen im Originaldatensatz nicht sauber codiert sind, kann R sie im falschen Typ einlesen. In unserem Beispiel wurde das Einkommen bei der dritten Beobachtung mit einem Euro-Zeichen versehen, sodass R die Variable als <code>character</code> interpretiert. Eine direkte Umwandlung mit <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> würde diese Beobachtung in <code>NA</code> recodieren, da sie keinen reinen Zahlenwert enthält:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">earnings</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">income</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: There was 1 warning in `mutate()`.</span></span>
<span><span class="co">#&gt; ℹ In argument: `income = as.numeric(income)`.</span></span>
<span><span class="co">#&gt; Caused by warning:</span></span>
<span><span class="co">#&gt; ! NAs durch Umwandlung erzeugt</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;    name           age nationality   income</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Anna Maria      33 DE              1689</span></span>
<span><span class="co">#&gt;  2 Ben             NA &lt;NA&gt;             875</span></span>
<span><span class="co">#&gt;  3 Clara           21 International     NA</span></span>
<span><span class="co">#&gt;  4 Dimitri         28 EU              2299</span></span>
<span><span class="co">#&gt;  5 Emilia-Luise    29 DE              2522</span></span>
<span><span class="co">#&gt;  6 Fatima          23 DE              1060</span></span>
<span><span class="co">#&gt;  7 Gerda           32 DE              1781</span></span>
<span><span class="co">#&gt;  8 Hannah          23 EU              2463</span></span>
<span><span class="co">#&gt;  9 Ismail          27 International   1442</span></span>
<span><span class="co">#&gt; 10 Johanna         21 DE              1404</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Um dies zu vermeiden, nutzen wir die <code>tidyverse</code>-Funktion <code>parse_number()</code>, die alle nicht-numerischen Zeichen entfernt und die Zahlen extrahiert:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">earnings</span> <span class="op">&lt;-</span> <span class="va">earnings</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>income <span class="op">=</span> <span class="fu">parse_number</span><span class="op">(</span><span class="va">income</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">earnings</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;    name           age nationality   income</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Anna Maria      33 DE              1689</span></span>
<span><span class="co">#&gt;  2 Ben             NA &lt;NA&gt;             875</span></span>
<span><span class="co">#&gt;  3 Clara           21 International   2000</span></span>
<span><span class="co">#&gt;  4 Dimitri         28 EU              2299</span></span>
<span><span class="co">#&gt;  5 Emilia-Luise    29 DE              2522</span></span>
<span><span class="co">#&gt;  6 Fatima          23 DE              1060</span></span>
<span><span class="co">#&gt;  7 Gerda           32 DE              1781</span></span>
<span><span class="co">#&gt;  8 Hannah          23 EU              2463</span></span>
<span><span class="co">#&gt;  9 Ismail          27 International   1442</span></span>
<span><span class="co">#&gt; 10 Johanna         21 DE              1404</span></span></code></pre></div><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></div>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Kopiert");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Kopiert");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./daten_transform.html" class="pagination-link" aria-label="Daten aufbereiten">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Daten aufbereiten</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./daten_export.html" class="pagination-link" aria-label="Daten exportieren">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Daten exportieren</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>